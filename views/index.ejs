<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guru Nanak Senior Secondary Girls School</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="style/index.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
        <a class="navbar-brand" href="#">gurunanak.jbp@gmail.com || 7987094603, 9669712299</a>
        </div>
    </nav>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <img src="SchoolLogo-removebg-preview.png" alt="Logo" width="90" height="90" class="d-inline-block align-text-top">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">About Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Co-Curriculum</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Admission
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Fee Structure</a></li>
                  <li><a class="dropdown-item" href="#">Courses</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Admission Coordinator</a></li>
                </ul>
              </li>
            </ul>
            <ul class="navbar-nav">
              <li class="nav-item">
                <button id="loginToggle" class="btn btn-outline-primary nav-link" onclick="toggleLoginForm()">Login</button>
              </li>
              <li class="nav-item">
                <button id="logoutButton" class="btn btn-outline-danger nav-link" onclick="logout()" style="display: none;">Logout</button>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <div id="loginForm" class="position-absolute end-0 mt-2 p-3 bg-light border rounded shadow" style="display: none; z-index: 1000;">
        <input type="text" id="username" class="form-control mb-2" placeholder="Username">
        <input type="password" id="password" class="form-control mb-2" placeholder="Password">
        <button onclick="login()" class="btn btn-primary">Login</button>
      </div>
      <div class="container">
        <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner" id="carouselInner">
            <% carouselData.images.forEach((image, index) => { %>
              <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                <img src="<%= image.src %>" class="d-block w-100 h-60" alt="<%= image.alt %>">
              </div>
            <% }) %>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
        <div id="adminControls" style="display: none;">
          <input type="file" id="imageFile" accept="image/*">
          <button onclick="uploadImage()">Add Image</button>
          <button onclick="deleteImage()">Delete Current Image</button>
        </div>
      </div>
    </div>
    <div class="container" style="height: 35rem;">
        <h2 class="align-text-top" id="new-title">News / Notice / Events</h2>
        <div class="news">
        <div class="news-scroller" style="width: 35rem;">
            <marquee direction="up" scrollamount="2">
                <ul id="newsList" class="new-list">
                    
                </ul>
                </marquee>
        </div>
        <div id="newsAdminControls" style="display: none;">
          <input type="text" id="newsInput" placeholder="Enter news item">
          <button onclick="addNewsItem()">Add News</button>
          <button onclick="removeLastNewsItem()">Remove Last News Item</button>
        </div>
        <div class="card" style="width: 18rem;">
            <img src="image6.jpeg" class="card-img-top" alt="...">
            <div class="card-body">
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            </div>
          </div>
        </div>
    </div>
    <section class="about-school">
      <div class="container">
        <h2 class="section-title">About Our School</h2>
        <div class="about-content">
          <div class="about-text">
            <h3 class="welcome-title">Welcome to Guru Nanak S.S Girls School, Jabalpur</h3>
            <p class="about-description">
              Guru Nanak S.S Girls School is a premier institution in Jabalpur, dedicated to supporting and promoting education for girls. As a minority institution, we welcome and motivate students from all castes, religions, and creeds to become exceptional scholars.
            </p>
            <div class="school-stats">
              <div class="stat-item">
                <span class="stat-number" data-target="1000">1200+</span>
                <span class="stat-label">Students</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" data-target="50">50+</span>
                <span class="stat-label">Teachers</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" data-target="95">100</span>
                <span class="stat-label">% Success Rate</span>
              </div>
            </div>
          </div>
          <div class="about-image">
            <img src="image7.jpeg" alt="Guru Nanak S.S Girls School" class="school-image">
            <div class="image-overlay">
              <span class="overlay-text">Empowering Girls Through Education</span>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="activities-events">
      <div class="container">
        <h2 class="section-title">Activities and Events</h2>
        <div class="activities-grid">
          <!-- Repeat this structure for each activity/event -->
          <div class="activity-card">
            <div class="activity-card-inner">
              <div class="activity-card-front">
                <img src="image6.jpeg" alt="Activity 1" class="activity-image">
                <h3 class="activity-title">Activity 1</h3>
              </div>
              <div class="activity-card-back">
                <h3 class="activity-title">Activity 1</h3>
                <p class="activity-description">Description of Activity 1 goes here. It can be a couple of sentences long.</p>
                <a href="#" class="activity-link">Learn More</a>
              </div>
            </div>
          </div>
          <!-- Add more activity cards here -->
          <div class="activity-card">
            <div class="activity-card-inner">
              <div class="activity-card-front">
                <img src="image6.jpeg" alt="Activity 1" class="activity-image">
                <h3 class="activity-title">Activity 2</h3>
              </div>
              <div class="activity-card-back">
                <h3 class="activity-title">Activity 2</h3>
                <p class="activity-description">Description of Activity 2 goes here. It can be a couple of sentences long.</p>
                <a href="#" class="activity-link">Learn More</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollTrigger/1.0.6/ScrollTrigger.min.js" integrity="sha512-+LXqbM6YLduaaxq6kNcjMsQgZQUTdZp7FTaArWYFt1nxyFKlQSMdIF/WQ/VgsReERwRD8w/9H9cahFx25UDd+g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
  function uploadImage() {
  const fileInput = document.getElementById('imageFile');
  const file = fileInput.files[0];
  if (file) {
    const formData = new FormData();
    formData.append('image', file);

    fetch('/upload-image', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        window.location.reload();
      } else {
        alert('Failed to upload image');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      alert('An error occurred while uploading the image');
    });
  } else {
    alert('Please select an image file');
  }
}

function deleteImage() {
  const carousel = document.getElementById('carouselExampleAutoplaying');
  const carouselInner = document.getElementById('carouselInner');
  const items = carouselInner.querySelectorAll('.carousel-item');
  
  if (items.length > 0) {
    const activeItem = carouselInner.querySelector('.carousel-item.active');
    const index = Array.from(items).indexOf(activeItem);
    
    fetch(`/deleteImage/${index}`, {
      method: 'DELETE',
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        window.location.reload();
      } else {
        alert('Failed to delete image');
      }
    });
  } else {
    alert('No images to delete');
  }
}

function loadNews() {
  fetch('/news')
    .then(response => response.json())
    .then(data => {
      const newsList = document.getElementById('newsList');
      newsList.innerHTML = '';
      data.items.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="#">${item}</a>`;
        newsList.appendChild(li);
      });
    });
}

function addNewsItem() {
  const newsInput = document.getElementById('newsInput');
  const text = newsInput.value.trim();
  if (text) {
    fetch('/news', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ text })
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        newsInput.value = '';
        loadNews();
      }
    });
  }
}

function removeLastNewsItem() {
  fetch('/news', { method: 'DELETE' })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        loadNews();
      }
    });
}

let isAuthenticated = false;

function checkAuthStatus() {
  fetch('/check-auth')
    .then(response => response.json())
    .then(data => {
      isAuthenticated = data.isAuthenticated;
      updateUI();
      loadNews();
    });
}

function updateUI() {
  document.getElementById('loginToggle').style.display = isAuthenticated ? 'none' : 'block';
  document.getElementById('logoutButton').style.display = isAuthenticated ? 'block' : 'none';
  document.getElementById('loginForm').style.display = 'none';
  document.getElementById('adminControls').style.display = isAuthenticated ? 'block' : 'none';
  document.getElementById('newsAdminControls').style.display = isAuthenticated ? 'block' : 'none';
}

function toggleLoginForm() {
  const loginForm = document.getElementById('loginForm');
  loginForm.style.display = loginForm.style.display === 'none' ? 'block' : 'none';
}

function login() {
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;
  
  fetch('/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ username, password })
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      isAuthenticated = true;
      updateUI();
      loadNews();
    } else {
      alert(data.message || 'Login failed. Please try again.');
    }
  })
  .catch(error => {
    console.error('Login error:', error);
    alert('An error occurred during login. Please try again.');
  });
}

function logout() {
  fetch('/logout', { method: 'POST' })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        isAuthenticated = false;
        updateUI();
      }
    });
}

// Call this function when the page loads
checkAuthStatus();

//  activities and events 
document.addEventListener('DOMContentLoaded', () => {
  const cards = document.querySelectorAll('.activity-card');

  // Add hover effect
  cards.forEach(card => {
    card.addEventListener('mouseenter', () => {
      card.style.transform = 'scale(1.05)';
      card.style.transition = 'all 0.3s ease';
    });

    card.addEventListener('mouseleave', () => {
      card.style.transform = 'scale(1)';
    });
  });

  // Add scroll reveal animation
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate');
      }
    });
  }, { threshold: 0.1 });

  cards.forEach(card => observer.observe(card));

  // Optional: Add click event to flip cards on mobile
  if ('ontouchstart' in window) {
    cards.forEach(card => {
      card.addEventListener('click', () => {
        card.querySelector('.activity-card-inner').style.transform = 
          card.querySelector('.activity-card-inner').style.transform === 'rotateY(180deg)' ? 'rotateY(0deg)' : 'rotateY(180deg)';
      });
    });
  }
});
</script>
</script>
<script src="index.js"></script>
</body>
</html>